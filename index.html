<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Master Editor V35 - UI Update</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif; margin: 0; display: flex; height: 100vh; background: #f2f2f7; color: #1c1c1e; }
        #ed { width: 450px; display: flex; flex-direction: column; background: #ffffff; border-right: 1px solid #d1d1d6; z-index: 10; box-shadow: 4px 0 15px rgba(0,0,0,0.03); }
        .header { padding: 20px 25px 15px; }
        .header h1 { font-size: 22px; margin: 0; font-weight: 700; }
        .header p { margin: 5px 0 0 0; font-size: 13px; color: #8e8e93; }
        .tabs { display: flex; padding: 0 20px; border-bottom: 1px solid #e5e5ea; }
        .tab-btn { flex: 1; padding: 12px 0; border: none; background: transparent; font-size: 13px; font-weight: 600; color: #8e8e93; cursor: pointer; border-bottom: 3px solid transparent; transition: 0.2s; }
        .tab-btn.active { color: #007aff; border-bottom-color: #007aff; }
        .scroll-area { flex-grow: 1; overflow-y: auto; padding: 20px 25px; background: #f2f2f7; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .box { background: #ffffff; padding: 20px; border-radius: 18px; margin-bottom: 15px; border: 1px solid #e5e5ea; }
        h3 { font-size: 11px; font-weight: 700; color: #8e8e93; text-transform: uppercase; margin: 0 0 15px 0; }
        label { display: block; font-size: 12px; font-weight: 500; color: #3a3a3c; margin-top: 12px; }
        input[type="text"], input[type="number"], select, textarea { width: 100%; padding: 10px; border-radius: 12px; border: 1px solid #d1d1d6; background: #fff; font-size: 14px; outline: none; margin-top: 5px; box-sizing: border-box; }
        input:focus { border-color: #007aff; }
        input[type="color"] { width: 100%; height: 40px; border: none; background: none; cursor: pointer; padding: 0; margin-top: 5px; }
        .check-wrap { display: flex; align-items: center; gap: 10px; margin-top: 15px; background: #f9f9f9; padding: 12px; border-radius: 12px; border: 1px solid #e5e5ea; cursor: pointer; }
        .check-wrap input { transform: scale(1.2); accent-color: #007aff; }
        .pair { display: flex; gap: 8px; margin-top: 10px; }
        .btn-add { background: #eef2ff; color: #007aff; border: 1px solid #007aff; font-weight: 600; padding: 12px; width: 100%; border-radius: 12px; cursor: pointer; margin-top: 15px; transition: 0.2s; }
        .btn-add:hover { background: #007aff; color: #fff; }
        .btn-del { width: 40px !important; background: #fff2f2; color: #ff3b30; border: 1px solid #ff3b30; border-radius: 10px; cursor: pointer; }
        .footer { padding: 20px 25px; background: #fff; border-top: 1px solid #e5e5ea; }
        .btn-gen { background: linear-gradient(135deg, #007aff, #005ecb); color: white; font-weight: 600; font-size: 15px; cursor: pointer; height: 55px; border: none; width: 100%; border-radius: 16px; box-shadow: 0 4px 15px rgba(0,122,255,0.3); }
        textarea#res { height: 60px; font-family: monospace; font-size: 11px; margin-top: 10px; border: none; background: #1c1c1e; color: #00c7be; padding: 10px; border-radius: 10px; width: 100%; box-sizing: border-box; }
        #pre { flex-grow: 1; background: #e5e5ea; padding: 20px; display: flex; align-items: center; justify-content: center; position: relative;}
        .preview-frame { width: 100%; height: 100%; background: white; border-radius: 30px; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.1); border: 8px solid #333; position: relative; }
        iframe { width: 100%; height: 100%; border: none; }
        
        #warning-msg {
            position: absolute; top: 10px; left: 50%; transform: translateX(-50%);
            background: rgba(255, 59, 48, 0.9); color: white; padding: 5px 15px; border-radius: 20px;
            font-size: 10px; font-weight: bold; pointer-events: none; z-index: 100;
            display: none;
        }

        #live-preview-container {
            width: 100%; height: 180px;
            background-color: #eee;
            background-image: linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%);
            background-size: 20px 20px; background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; border: 1px solid #ccc; overflow: hidden;
        }
        #preview-card {
            display: flex; align-items: center; justify-content: center; text-align: center; box-sizing: border-box;
            background-size: contain; background-repeat: no-repeat; background-position: center; transition: 0.1s; user-select: none;
        }
    </style>
</head>
<body>
<div id="ed">
    <div class="header">
        <h1>–†–µ–¥–∞–∫—Ç–æ—Ä –ò–≥—Ä—ã üß©</h1>
        <p>–ù–∞—Å—Ç—Ä–æ–π –≤—Å–µ –¥–µ—Ç–∞–ª–∏</p>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="openTab('content')">üìù –ö–æ–Ω—Ç–µ–Ω—Ç</button>
        <button class="tab-btn" onclick="openTab('design')">üé® –î–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–µ–∫</button>
        <button class="tab-btn" onclick="openTab('texts')">üí¨ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å</button>
        <button class="tab-btn" onclick="openTab('sounds')">üéµ –ó–≤—É–∫–∏</button>
    </div>

    <div class="scroll-area">
        <div id="tab-content" class="tab-content active">
            <div class="box">
                <h3>üìã –ú–∞—Å—Å–æ–≤–∞—è –≤—Å—Ç–∞–≤–∫–∞</h3>
                <p style="font-size:11px; color:#888; margin-top:0">–§–æ—Ä–º–∞—Ç: –°–ª–æ–≤–æ | –ü–µ—Ä–µ–≤–æ–¥</p>
                <textarea id="bulk-text" style="height:100px" placeholder="–ö–æ—Ç | Cat&#10;7-6 | 1"></textarea>
                <button class="btn-add" style="background:#34c759; border-color:#34c759; color:white; margin-top:10px" onclick="bulkImport()">üì• –í—Å—Ç–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
            </div>
            <div class="box">
                <h3>‚è± –¢–∞–π–º–µ—Ä –∏ –°–ª–æ–∂–Ω–æ—Å—Ç—å</h3>
                <div class="check-wrap" onclick="let i=this.querySelector('input'); i.checked=!i.checked; toggleTimerInput()">
                    <input type="checkbox" id="use_timer">
                    <label>–í–∫–ª—é—á–∏—Ç—å —Ç–∞–π–º–µ—Ä</label>
                </div>
                <div id="timer-set" style="display:none; margin-top:10px;">
                    <label>–í—Ä–µ–º—è –Ω–∞ –∏–≥—Ä—É (—Å–µ–∫—É–Ω–¥)</label>
                    <input type="number" id="time_val" value="60">
                </div>
                <div class="pair">
                    <div style="flex:1"><label>–ü–∞—Ä –∏—Å–∫–∞—Ç—å</label><input type="number" id="limit" value="3"></div>
                    <div style="flex:1"><label>–õ–æ–≤—É—à–µ–∫</label><input type="number" id="extra-count" value="2"></div>
                </div>
                <label>–°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–ª–µ—Ç–∞</label>
                <input type="range" id="speed" min="0" max="10" step="0.5" value="2">
            </div>
            <div class="box">
                <h3>üß© –ë–∞–∑–∞ –ø–∞—Ä</h3>
                <div id="p-cont">
                    <div class="pair"><input class="pa" placeholder="–ü–∞—Ä–∞ –ê"><input class="pb" placeholder="–ü–∞—Ä–∞ –ë"><button class="btn-del" onclick="this.parentElement.remove()">√ó</button></div>
                </div>
                <button class="btn-add" onclick="addP()">+ –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—É</button>
            </div>
        </div>

        <div id="tab-design" class="tab-content">
            <div class="box">
                <h3>ü¶ã –ö–∞—Ä—Ç–æ—á–∫–∏</h3>
                <label>–†–∞–∑–º–µ—Ä (px)</label><input type="number" id="csize" value="140" oninput="updPrev()">
                <div class="check-wrap" onclick="let i=this.querySelector('input'); i.checked=!i.checked; updPrev()">
                    <input type="checkbox" id="def_bg">
                    <label>–°–∏–Ω—è—è –±–∞–±–æ—á–∫–∞ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ–Ω)</label>
                </div>
                <label style="margin-top:15px">–°–≤–æ–π —Ñ–æ–Ω (URL):</label><input type="text" id="cimg" placeholder="http://..." oninput="updPrev()">
                
                <label>–¶–≤–µ—Ç/–†–∞–º–∫–∞ (–µ—Å–ª–∏ –Ω–µ—Ç —Ñ–æ–Ω–∞):</label>
                <div class="pair">
                    <input type="color" id="bg_c_pick" value="#ffffff" oninput="updPrev()"><input type="number" id="bg_op" value="0.9" step="0.1" max="1" oninput="updPrev()">
                </div>
                <div class="pair">
                    <input type="color" id="b_c" value="#e5e5ea" oninput="updPrev()"><input type="number" id="b_w" value="1" oninput="updPrev()">
                </div>
            </div>

            <div class="box">
                <h3>üî§ –¢–µ–∫—Å—Ç –∏ –ü–æ–∑–∏—Ü–∏—è</h3>
                <div id="live-preview-container">
                    <div id="preview-card"><span id="preview-text">–¢–µ–∫—Å—Ç</span></div>
                </div>
                
                <label>Google Font</label><input type="text" id="font" value="Nunito" oninput="updPrev()">
                <div class="pair"><input id="fsize" value="28px" oninput="updPrev()"><input type="color" id="fcolor" value="#333333" oninput="updPrev()"></div>
                
                <label style="color:#007aff; margin-top:15px;">–°–º–µ—â–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞</label>
                <div class="pair">
                    <div style="flex:1; text-align:center;">
                        <span style="font-size:10px; color:#888;">X (–í–ª–µ–≤–æ/–í–ø—Ä–∞–≤–æ)</span>
                        <input type="range" id="tx" min="-60" max="60" value="0" oninput="updPrev()">
                    </div>
                    <div style="flex:1; text-align:center;">
                        <span style="font-size:10px; color:#888;">Y (–í–≤–µ—Ä—Ö/–í–Ω–∏–∑)</span>
                        <input type="range" id="ty" min="-60" max="60" value="0" oninput="updPrev()">
                    </div>
                </div>

                <label>–≠—Ñ—Ñ–µ–∫—Ç</label>
                <select id="effect" onchange="updPrev()"><option value="">–ù–µ—Ç</option><option value="font-effect-neon">–ù–µ–æ–Ω</option><option value="font-effect-3d">3D</option></select>
            </div>
        </div>

        <div id="tab-texts" class="tab-content">
            <div class="box">
                <h3>üëã –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ</h3>
                <input type="text" id="st_t" value="–ù–∞–π–¥–∏ –ø–∞—Ä—ã">
                <textarea id="st_d" style="height:50px">–û—Å—Ç–æ—Ä–æ–∂–Ω–æ! –ï—Å—Ç—å –ª–∏—à–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏</textarea>
                <label>–ö–Ω–æ–ø–∫–∞</label><input type="text" id="st_b" value="–ò–ì–†–ê–¢–¨">
            </div>
            
            <div class="box">
                <h3>üèÜ –§–∏–Ω–∞–ª</h3>
                <label>–ü–æ–±–µ–¥–∞:</label>
                <input id="wt" value="–ü–æ–±–µ–¥–∞!">
                <input id="wd" value="–¢—ã —Å—É–ø–µ—Ä!">
                <input id="wi" placeholder="URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ü–æ–±–µ–¥—ã (–∏–ª–∏ –ø—É—Å—Ç–æ)"> <label style="margin-top:10px">–ü—Ä–æ–∏–≥—Ä—ã—à:</label>
                <input id="lt" value="–û–π!">
                <input id="ld" value="–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫">
                <input id="li" placeholder="URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ü—Ä–æ–∏–≥—Ä—ã—à–∞ (–∏–ª–∏ –ø—É—Å—Ç–æ)"> <label style="margin-top:10px">–ö–Ω–æ–ø–∫–∞:</label>
                <input id="rb" value="–ó–ê–ù–û–í–û">
            </div>

            <div class="box">
                <h3>‚è≥ –û–∫–Ω–æ "–í—Ä–µ–º—è –≤—ã—à–ª–æ"</h3>
                <input id="to_t" value="–í—Ä–µ–º—è –≤—ã—à–ª–æ!" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
                <input id="to_d" value="–ù–æ —Ç—ã –º–æ–∂–µ—à—å –∑–∞–∫–æ–Ω—á–∏—Ç—å." placeholder="–¢–µ–∫—Å—Ç">
                <input id="to_i" placeholder="URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ —á–∞—Å–æ–≤ (–∏–ª–∏ –ø—É—Å—Ç–æ)">
            </div>

            <div class="box">
                <h3>‚ù§Ô∏è –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å</h3>
                <label>–ñ–∏–∑–Ω–∏ (URL):</label><input type="text" id="lifeimg" placeholder="–°–µ—Ä–¥–µ—á–∫–æ">
                
                <label style="margin-top:10px">–í—Å–ø–ª—ã–≤–∞—à–∫–∏ (–ö–∞—Ä—Ç–∏–Ω–∫–∏):</label> <div class="pair">
                    <input id="winimg" placeholder="–£—Å–ø–µ—Ö (gif)">
                    <input id="loseimg" placeholder="–û—à–∏–±–∫–∞ (gif)">
                </div>

                <label>–¶–≤–µ—Ç UI:</label><input type="color" id="pcolor" value="#007aff">
            </div>
        </div>

        <div id="tab-sounds" class="tab-content">
            <div class="box">
                <h3>üéµ –ó–≤—É–∫–∏ (URL mp3)</h3>
                <label>–ö–ª–∏–∫</label><input type="text" id="s_click" placeholder="–°—Ç–∞–Ω–¥–∞—Ä—Ç">
                <label>–í–µ—Ä–Ω–æ</label><input type="text" id="s_ok" placeholder="–°—Ç–∞–Ω–¥–∞—Ä—Ç">
                <label>–û—à–∏–±–∫–∞</label><input type="text" id="s_bad" placeholder="–°—Ç–∞–Ω–¥–∞—Ä—Ç">
                <label>–ü–æ–±–µ–¥–∞</label><input type="text" id="s_win" placeholder="–°—Ç–∞–Ω–¥–∞—Ä—Ç">
                <label>–ü—Ä–æ–∏–≥—Ä—ã—à</label><input type="text" id="s_lose" placeholder="–°—Ç–∞–Ω–¥–∞—Ä—Ç">
                <label>–í—Ä–µ–º—è –≤—ã—à–ª–æ</label><input type="text" id="s_timeout" placeholder="time.mp3 (–°—Ç–∞–Ω–¥–∞—Ä—Ç)">
            </div>
        </div>
    </div>

    <div class="footer">
        <button class="btn-gen" onclick="update()">–°–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨ –°–°–´–õ–ö–£</button>
        <textarea id="res" readonly placeholder="–ö–æ–¥ –¥–ª—è Genially..."></textarea>
    </div>
</div>

<div id="pre">
    <div id="warning-msg">–ü–†–ï–î–ü–†–û–°–ú–û–¢–† –ì–†–£–ó–ò–¢–°–Ø –° –ò–ù–¢–ï–†–ù–ï–¢–ê. –û–ë–ù–û–í–ò–¢–ï –§–ê–ô–õ –ù–ê GITHUB!</div>
    <div class="preview-frame"><iframe id="ifr"></iframe></div>
</div>

<script>
    function openTab(name) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('tab-' + name).classList.add('active');
        event.currentTarget.classList.add('active');
        if(name === 'design') updPrev();
    }
    
    function toggleTimerInput() {
        const check = document.getElementById('use_timer');
        const box = document.getElementById('timer-set');
        box.style.display = check.checked ? 'block' : 'none';
    }

    function addP(valA = '', valB = '') {
        const d = document.createElement('div'); d.className='pair';
        d.innerHTML=`<input class="pa" value="${valA}" placeholder="–ü–∞—Ä–∞ –ê"><input class="pb" value="${valB}" placeholder="–ü–∞—Ä–∞ –ë"><button class="btn-del" onclick="this.parentElement.remove()">√ó</button>`;
        document.getElementById('p-cont').appendChild(d);
    }

    function bulkImport() {
        const text = document.getElementById('bulk-text').value.trim();
        if(!text) return;
        const lines = text.split(/\n/);
        lines.forEach(line => {
            let parts = line.split('|');
            if(parts.length < 2) parts = [line.trim(), ''];
            // –û—á–∏—Å—Ç–∫–∞ –æ—Ç —Å—Ç—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–æ–±–µ–ª–æ–≤
            const cleanA = parts[0].trim().replace(/\t/g,'');
            const cleanB = parts[1] ? parts[1].trim().replace(/\t/g,'') : '';
            addP(cleanA, cleanB);
        });
        document.getElementById('bulk-text').value = '';
    }

    function hexToRgba(hex, alpha) {
        let c;
        if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
            c = hex.substring(1).split('');
            if(c.length === 3){ c= [c[0], c[0], c[1], c[1], c[2], c[2]]; }
            c= '0x'+c.join('');
            return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+','+alpha+')';
        }
        return hex;
    }

    function updPrev() {
        const card = document.getElementById('preview-card');
        const text = document.getElementById('preview-text');
        
        const cSize = document.getElementById('csize').value;
        const defBg = document.getElementById('def_bg').checked;
        const customBg = document.getElementById('cimg').value;
        const tx = document.getElementById('tx').value;
        const ty = document.getElementById('ty').value;
        
        const fSize = document.getElementById('fsize').value;
        const fColor = document.getElementById('fcolor').value;
        const fontName = document.getElementById('font').value;
        
        card.style.width = cSize + 'px';
        card.style.height = cSize + 'px';
        
        if (defBg) {
            card.style.backgroundImage = "url('https://natashagodlevskaya16021995-ux.github.io/para.proba4/images/babochka.png')";
            card.style.backgroundColor = 'transparent';
            card.style.border = 'none';
            card.style.boxShadow = 'none';
        } else if (customBg) {
            card.style.backgroundImage = `url('${customBg}')`;
            card.style.backgroundColor = 'transparent';
            card.style.border = 'none';
            card.style.boxShadow = 'none';
        } else {
            const bgC = document.getElementById('bg_c_pick').value;
            const bgOp = document.getElementById('bg_op').value;
            const bC = document.getElementById('b_c').value;
            const bW = document.getElementById('b_w').value;
            
            card.style.backgroundImage = 'none';
            card.style.backgroundColor = hexToRgba(bgC, bgOp);
            card.style.border = `${bW}px solid ${bC}`;
            card.style.boxShadow = '0 4px 10px rgba(0,0,0,0.1)';
            card.style.borderRadius = '20px';
        }

        card.style.fontFamily = fontName;
        card.style.fontSize = fSize.replace('px','') + 'px';
        card.style.color = fColor;
        
        text.style.transform = `translate(${tx}px, ${ty}px)`;
    }

    setTimeout(updPrev, 500);
    
    function update() {
        let full = []; document.querySelectorAll('#p-cont .pair').forEach(p => { const a=p.querySelector('.pa').value.trim(); const b=p.querySelector('.pb').value.trim(); if(a && b) full.push({a, b}); });
        
        const defBg = document.getElementById('def_bg').checked ? '1' : '0';
        const useTimer = document.getElementById('use_timer').checked;
        const timeVal = useTimer ? document.getElementById('time_val').value : '0';

        const url = "https://natashagodlevskaya16021995-ux.github.io/para.proba4/index.html";
        
        const p = new URLSearchParams({
            st_t: document.getElementById('st_t').value, st_d: document.getElementById('st_d').value, st_b: document.getElementById('st_b').value,
            wt: document.getElementById('wt').value, wd: document.getElementById('wd').value, lt: document.getElementById('lt').value, ld: document.getElementById('ld').value, rb: document.getElementById('rb').value,
            to_t: document.getElementById('to_t').value, to_d: document.getElementById('to_d').value, to_i: document.getElementById('to_i').value,
            
            wi: document.getElementById('wi').value,
            li: document.getElementById('li').value,
            winimg: document.getElementById('winimg').value,
            loseimg: document.getElementById('loseimg').value,

            speed: document.getElementById('speed').value, pcolor: document.getElementById('pcolor').value, 
            cimg: document.getElementById('cimg').value, def_bg: defBg, csize: document.getElementById('csize').value,
            bg_c: document.getElementById('bg_c_pick').value, bg_op: document.getElementById('bg_op').value, b_c: document.getElementById('b_c').value, b_w: document.getElementById('b_w').value,
            font: document.getElementById('font').value, fsize: document.getElementById('fsize').value, fcolor: document.getElementById('fcolor').value, effect: document.getElementById('effect').value,
            
            tx: document.getElementById('tx').value, ty: document.getElementById('ty').value,

            lifeimg: document.getElementById('lifeimg').value, s_click: document.getElementById('s_click').value, s_ok: document.getElementById('s_ok').value, s_bad: document.getElementById('s_bad').value, s_win: document.getElementById('s_win').value,
            s_timeout: document.getElementById('s_timeout').value,
            
            pairs: JSON.stringify(full), limit: document.getElementById('limit').value, extraCount: document.getElementById('extra-count').value,
            time: timeVal 
        });
        
        const finalUrl = url + "?" + p.toString();
        // –î–æ–±–∞–≤–ª—è–µ–º –∫—ç—à-–±–∞—Å—Ç–µ—Ä, —á—Ç–æ–±—ã –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ–±–æ–π—Ç–∏ –∫—ç—à
        document.getElementById('ifr').src = finalUrl + "&t=" + Date.now();
        document.getElementById('res').value = `<iframe src="${finalUrl}" width="100%" height="600" style="border:none;" allowtransparency="true"></iframe>`;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
        const warn = document.getElementById('warning-msg');
        warn.style.display = 'block';
        setTimeout(() => warn.style.display = 'none', 5000);
    }
</script>
</body>
</html>
