<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Master Editor V21 - Fix Traps</title>
    <style>
        body { font-family: sans-serif; margin: 0; display: flex; height: 100vh; background: #121212; color: white; }
        #ed { width: 450px; padding: 20px; overflow-y: auto; background: #1e1e1e; border-right: 2px solid #333; box-sizing: border-box; }
        .box { background: #252525; padding: 15px; border-radius: 8px; margin-bottom: 12px; border: 1px solid #333; }
        h3 { font-size: 11px; color: #03dac6; text-transform: uppercase; margin: 0 0 10px 0; }
        label { display: block; font-size: 10px; color: #888; margin-top: 8px; }
        input, select, button, textarea { width: 100%; padding: 8px; margin-top: 5px; border-radius: 4px; border: 1px solid #444; background: #121212; color: white; box-sizing: border-box; }
        .pair { display: flex; gap: 5px; margin-top: 5px; }
        .btn-gen { background: #bb86fc; color: #000; font-weight: bold; margin-top: 20px; cursor: pointer; height: 45px; border: none; }
        .btn-del { width: 30px !important; background: #cf667922; color: #cf6679; border: 1px solid #cf6679; }
        #pre { flex-grow: 1; background: #000; display: flex; flex-direction: column; }
        iframe { width: 100%; height: 100%; border: none; flex-grow: 1; }
        textarea#res { height: 80px; font-size: 10px; background: #000; color: #0f0; margin-top: 10px; }
    </style>
</head>
<body>
<div id="ed">
    <div class="box" style="border-left: 3px solid #bb86fc;">
        <h3>üëã –≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è</h3>
        <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
        <input type="text" id="st_t" value="–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å">
        <label>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</label>
        <textarea id="st_d" style="height:40px">–ù–∞–π–¥–∏ –≤—Å–µ –ø–∞—Ä—ã!</textarea>
        <label>–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ä—Ç–∞</label>
        <input type="text" id="st_b" value="–ò–ì–†–ê–¢–¨">
    </div>

    <div class="box">
        <h3>ü¶ã –í–∏–¥ –∫–∞—Ä—Ç–æ—á–∫–∏</h3>
        <label>–†–∞–∑–º–µ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ (px)</label>
        <input type="number" id="csize" value="140">
        
        <label style="color:#03dac6; margin-top:10px">–í–ê–†–ò–ê–ù–¢ 1: –ö–∞—Ä—Ç–∏–Ω–∫–∞ —Ñ–æ–Ω–∞ (–ï—Å–ª–∏ –µ—Å—Ç—å - —Ä–∞–º–∫–∞ –æ—Ç–∫–ª—é—á–∏—Ç—Å—è)</label>
        <input type="text" id="cimg" placeholder="URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä –±–∞–±–æ—á–∫–∞)">

        <label style="color:#bb86fc; margin-top:15px">–í–ê–†–ò–ê–ù–¢ 2: –°—Ç–∏–ª—å–Ω–∞—è —Ä–∞–º–∫–∞ (–†–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ –Ω–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏)</label>
        <div class="pair">
            <div style="flex:1"><label>–¶–≤–µ—Ç —Ñ–æ–Ω–∞</label><input type="color" id="bg_c_pick" value="#1e1e1e"></div>
            <div style="flex:1"><label>–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å (0-1)</label><input type="number" id="bg_op" value="0.8" step="0.1" max="1" min="0"></div>
        </div>
        <div class="pair">
            <div style="flex:1"><label>–¶–≤–µ—Ç —Ä–∞–º–∫–∏</label><input type="color" id="b_c" value="#ffffff"></div>
            <div style="flex:1"><label>–¢–æ–ª—â–∏–Ω–∞</label><input type="number" id="b_w" value="2"></div>
        </div>
        <label>–ó–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤</label>
        <input type="number" id="b_r" value="15">
    </div>

    <div class="box">
        <h3>üé® –®—Ä–∏—Ñ—Ç –∏ —Ç–µ–∫—Å—Ç</h3>
        <label>Google Font Name</label>
        <input type="text" id="font" value="Oswald">
        <div class="pair">
            <div style="flex:1"><label>–ö–µ–≥–µ–ª—å (px)</label><input id="fsize" value="25px"></div>
            <div style="flex:1"><label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</label><input type="color" id="fcolor" value="#ffffff"></div>
        </div>
        <label>–≠—Ñ—Ñ–µ–∫—Ç</label>
        <select id="effect">
            <option value="">–ù–µ—Ç</option>
            <option value="font-effect-neon">–ù–µ–æ–Ω</option>
            <option value="font-effect-3d">3D</option>
        </select>
    </div>

    <div class="box">
        <h3>üéÆ –ò–≥—Ä–æ–≤–æ–π –±–∞–ª–∞–Ω—Å</h3>
        <div class="pair">
            <div style="flex:1"><label>–ü–∞—Ä –≤ –∏–≥—Ä–µ</label><input type="number" id="limit" value="2"></div>
            <div style="flex:1"><label>–ü—É—Å—Ç—ã—à–µ–∫</label><input type="number" id="extra-count" value="2"></div>
        </div>
        <label>–°–∫–æ—Ä–æ—Å—Ç—å</label>
        <input type="range" id="speed" min="0" max="10" step="0.5" value="2">
    </div>

    <div class="box">
        <h3>üéµ –ó–≤—É–∫–∏ (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</h3>
        <label>–ö–ª–∏–∫ (URL mp3)</label><input type="text" id="s_click" placeholder="–ü—É—Å—Ç–æ = –°—Ç–∞–Ω–¥–∞—Ä—Ç">
        <label>–ü–∞—Ä–∞ –Ω–∞–π–¥–µ–Ω–∞ (URL mp3)</label><input type="text" id="s_ok" placeholder="–ü—É—Å—Ç–æ = –°—Ç–∞–Ω–¥–∞—Ä—Ç">
        <label>–û—à–∏–±–∫–∞ (URL mp3)</label><input type="text" id="s_bad" placeholder="–ü—É—Å—Ç–æ = –°—Ç–∞–Ω–¥–∞—Ä—Ç">
        <label>–ü–æ–±–µ–¥–∞ (URL mp3)</label><input type="text" id="s_win" placeholder="–ü—É—Å—Ç–æ = –°—Ç–∞–Ω–¥–∞—Ä—Ç">
        <label>–ü—Ä–æ–∏–≥—Ä—ã—à (URL mp3)</label><input type="text" id="s_lose" placeholder="–ü—É—Å—Ç–æ = –°—Ç–∞–Ω–¥–∞—Ä—Ç">
    </div>

    <div class="box">
        <h3>üñº –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å</h3>
        <label>–ñ–∏–∑–Ω—å (URL)</label><input type="text" id="lifeimg" placeholder="–ü—É—Å—Ç–æ = –°—Ç–∞–Ω–¥–∞—Ä—Ç –∏–∑ –∫–æ–¥–∞">
        <div class="pair"><input id="winimg" placeholder="–í—Å–ø–ª—ã–≤–∞—à–∫–∞ –£—Å–ø–µ—Ö (–∏–ª–∏ –ø—É—Å—Ç–æ)"><input id="loseimg" placeholder="–í—Å–ø–ª—ã–≤–∞—à–∫–∞ –û—à–∏–±–∫–∞ (–∏–ª–∏ –ø—É—Å—Ç–æ)"></div>
        <label>–¶–≤–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</label><input type="color" id="pcolor" value="#03dac6">
    </div>

    <div class="box" style="border-left: 3px solid #03dac6;">
        <h3>üèÜ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –§–∏–Ω–∞–ª–∞</h3>
        <label>–ü–æ–±–µ–¥–∞: –ó–∞–≥–æ–ª–æ–≤–æ–∫ / –¢–µ–∫—Å—Ç / –ö–∞—Ä—Ç–∏–Ω–∫–∞ (URL)</label>
        <input id="wt" value="–ü–æ–±–µ–¥–∞!">
        <input id="wd" value="–¢—ã —Å—É–ø–µ—Ä!">
        <input id="wi" placeholder="URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏–ª–∏ –ü—É—Å—Ç–æ –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞">

        <label style="margin-top:15px">–ü—Ä–æ–∏–≥—Ä—ã—à: –ó–∞–≥–æ–ª–æ–≤–æ–∫ / –¢–µ–∫—Å—Ç / –ö–∞—Ä—Ç–∏–Ω–∫–∞ (URL)</label>
        <input id="lt" value="–û–π!">
        <input id="ld" value="–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑">
        <input id="li" placeholder="URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏–ª–∏ –ü—É—Å—Ç–æ –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞">

        <label>–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞</label>
        <input id="rb" value="–ó–ê–ù–û–í–û">
    </div>

    <div class="box">
        <h3>üìù –ë–∞–∑–∞ –ø–∞—Ä (–¢–µ–∫—Å—Ç –∏–ª–∏ –ö–∞—Ä—Ç–∏–Ω–∫–∞ URL)</h3>
        <div id="p-cont">
            <div class="pair"><input class="pa" placeholder="–¢–µ–∫—Å—Ç –∏–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É"><input class="pb" placeholder="–¢–µ–∫—Å—Ç –∏–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É"><button class="btn-del" onclick="this.parentElement.remove()">√ó</button></div>
        </div>
        <button onclick="addP()" style="margin-top:10px; border: 1px solid #03dac6; color: #03dac6;">+ –î–æ–±–∞–≤–∏—Ç—å –≤ –±–∞–∑—É</button>
    </div>

    <button class="btn-gen" onclick="update()">–û–ë–ù–û–í–ò–¢–¨ –ò –ü–û–õ–£–ß–ò–¢–¨ –ö–û–î</button>
    <textarea id="res" readonly></textarea>
</div>
<div id="pre"><iframe id="ifr"></iframe></div>

<script>
    function addP() {
        const d = document.createElement('div'); d.className = 'pair';
        d.innerHTML = '<input class="pa" placeholder="–¢–µ–∫—Å—Ç –∏–ª–∏ URL –∫–∞—Ä—Ç–∏–Ω–∫–∏"><input class="pb" placeholder="–¢–µ–∫—Å—Ç –∏–ª–∏ URL –∫–∞—Ä—Ç–∏–Ω–∫–∏"><button class="btn-del" onclick="this.parentElement.remove()">√ó</button>';
        document.getElementById('p-cont').appendChild(d);
    }

    // –•–µ–ª–ø–µ—Ä –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ hex –≤ rgba
    function hexToRgba(hex, alpha) {
        let c;
        if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
            c = hex.substring(1).split('');
            if(c.length === 3){ c= [c[0], c[0], c[1], c[1], c[2], c[2]]; }
            c= '0x'+c.join('');
            return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+','+alpha+')';
        }
        return hex;
    }

    function update() {
        let full = [];

        document.querySelectorAll('#p-cont .pair').forEach(p => {
            const a = p.querySelector('.pa')?.value.trim();
            const b = p.querySelector('.pb')?.value.trim();
            if(a && b) full.push({a, b});
        });

        const limit = parseInt(document.getElementById('limit').value) || full.length;
        const extraCount = parseInt(document.getElementById('extra-count').value) || 0;

        // –°–æ–±–∏—Ä–∞–µ–º —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
        const bgHex = document.getElementById('bg_c_pick').value;
        const bgOp = document.getElementById('bg_op').value;
        const finalBg = hexToRgba(bgHex, bgOp);

        // ‚úÖ repo para.proba4
        const url = "https://natashagodlevskaya16021995-ux.github.io/para.proba4/index.html";

        const p = new URLSearchParams({
            st_t: document.getElementById('st_t').value,
            st_d: document.getElementById('st_d').value,
            st_b: document.getElementById('st_b').value,
            wt: document.getElementById('wt').value,
            wd: document.getElementById('wd').value,
            wi: document.getElementById('wi').value,
            lt: document.getElementById('lt').value,
            ld: document.getElementById('ld').value,
            li: document.getElementById('li').value,
            rb: document.getElementById('rb').value,

            speed: document.getElementById('speed').value,
            pcolor: document.getElementById('pcolor').value,
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∏–ª—è
            cimg: document.getElementById('cimg').value,
            csize: document.getElementById('csize').value,
            bg_c: finalBg,
            b_c: document.getElementById('b_c').value,
            b_w: document.getElementById('b_w').value,
            b_r: document.getElementById('b_r').value,

            font: document.getElementById('font').value,
            fsize: document.getElementById('fsize').value,
            fcolor: document.getElementById('fcolor').value,
            effect: document.getElementById('effect').value,
            lifeimg: document.getElementById('lifeimg').value,
            winimg: document.getElementById('winimg').value,
            loseimg: document.getElementById('loseimg').value,
            
            // –ó–≤—É–∫–∏
            s_click: document.getElementById('s_click').value,
            s_ok: document.getElementById('s_ok').value,
            s_bad: document.getElementById('s_bad').value,
            s_win: document.getElementById('s_win').value,
            s_lose: document.getElementById('s_lose').value,

            pairs: JSON.stringify(full),
            limit: String(limit),
            extraCount: String(extraCount)
        });

        const finalUrl = url + "?" + p.toString();
        document.getElementById('ifr').src = finalUrl + "&t=" + Date.now();
        document.getElementById('res').value = `<iframe src="${finalUrl}" width="100%" height="600" style="border:none;" allowtransparency="true"></iframe>`;
    }
</script>
</body>
</html>
